# MoodleRest

MoodleRest is a PHP class to query Moodle REST webservices.

## Quick start

Ensure you already have access to a Moodle webservice. To use this class you will need a token (generated by Moodle admin).

Include the MoodleRest.php class in your script.

```php
require_once('MoodleRest.php');
```

### Example 1

Instantiate the MoodleRest object;

```php
$MoodleRest = new MoodleRest();
```

Set the Moodle server, token and the request return format (array, json or xml)

```php
$MoodleRest->setServerAddress("http://127.0.0.1/moodle/webservice/rest/server.php");
$MoodleRest->setToken('8f12e614dae30735260a045313caa400');
$MoodleRest->setReturnFormat('array');
```

Call the server. In this example we query 2 pre-existent Moodle groups with IDs 1 and 2.

```php
$arr = $MoodleRest->request('core_group_get_groups', array('groupids' => array(1,2)))->getData();

print_r($arr);
```

### Example 2

In this example we make a request using chained methods and output the result as pure json.

```php
(new MoodleRest())->setServerAddress("http://127.0.0.1/moodle/webservice/rest/server.php")->
setToken('8f12e614dae30735260a045313caa400')->
setReturnFormat('json')->request('core_group_get_groups', array('groupids' => array(1,2)))->outputHeader()->outputResult();
```

Other examples inside the source.
